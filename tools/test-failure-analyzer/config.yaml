github:
  token: '${GITHUB_TOKEN}'
  api_base_url: "https://api.github.com"
  # Organization/repo resolution will be derived from run URL/ID

loki:
  # These are resolved by env vars set by the agent (matches shared-workflows/system-tests-analyzer.yml)
  base_url: "${GRAFANA_URL}"
  mode: "grafana_proxy"
  # Either basic auth or bearer token, prefer tokens via env
  bearer_token: '${LOKI_TOKEN}'
  grafana:
    url: "${GRAFANA_URL}"
    api_token: '${GRAFANA_TOKEN}'
    datasource_id: "${GRAFANA_DATASOURCE_ID}"
  # Default label keys used across services
  labels:
    namespace: "namespace"
    app: "app"
  templates:
    # Query by namespace only to catch all services (API, workers, async processors)
    event-ingester-service: '{{namespace="${NAMESPACE}"}} {id_filters}'
    cadashboardbe: '{{namespace="${NAMESPACE}"}} {id_filters}'
    config-service: '{{namespace="${NAMESPACE}"}} {id_filters}'
    users-notification-service: '{{namespace="${NAMESPACE}"}} {id_filters}'

parser:
  # Regex patterns to extract identifiers from logs
  customer_guid_patterns:
    - '(?i)customer[-_ ]?guid[:=][ \t]*([0-9a-f-]{32,36})'
    - '(?i)tenant[-_ ]?id[:=][ \t]*([0-9a-f-]{32,36})'
  cluster_name_patterns:
    - '(?i)cluster[:=][ \t]*([a-z0-9-_.]{3,64})'

defaults:
  time_padding: "10m"
  mapping_path: "../../system_test_mapping.json"

